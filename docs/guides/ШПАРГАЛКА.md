# üöÄ –®–ø–∞—Ä–≥–∞–ª–∫–∞ - –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

## ‚ö° –ó–∞–ø—É—Å–∫ –∑–∞ 30 —Å–µ–∫—É–Ω–¥

```bash
cd /Users/dimmy-kor/Projects/2gis_hackaton/backend
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
go run cmd/server/main.go
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl http://localhost:8080/api/health
```

---

## üéµ –ë—ã—Å—Ç—Ä–æ–µ –ü–æ–ª—É—á–µ–Ω–∏–µ –ê—É–¥–∏–æ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**
```bash
./download_audio.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç
2. ‚è≥ –ñ–¥–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—É–¥–∏–æ
3. üîä –°–∫–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ MP3 —Ñ–∞–π–ª—ã
4. üìÅ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–∞–ø–∫—É `route_XXXXXXXX/`

**–ò–ª–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Ç–æ—á–∫—É –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
START_LAT=55.8304 START_LON=37.6325 DURATION=90 ./download_audio.sh
```

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã (–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º)

### 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞
```bash
curl http://localhost:8080/api/pois | python3 -m json.tool
```

### 2. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
```bash
curl -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"]
  }'
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å route_id –∏–∑ –æ—Ç–≤–µ—Ç–∞!**

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
```bash
curl http://localhost:8080/api/routes/YOUR_ROUTE_ID | python3 -m json.tool
```

### 4. –ü–æ–ª—É—á–∏—Ç—å waypoint ID –∏ —Å–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ
```bash
# –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
curl -s http://localhost:8080/api/routes/YOUR_ROUTE_ID | python3 -m json.tool

# –ò–∑–≤–ª–µ—á—å –ø–µ—Ä–≤—ã–π waypoint_id
WAYPOINT_ID=$(curl -s http://localhost:8080/api/routes/YOUR_ROUTE_ID | \
  python3 -c "import sys,json; print(json.load(sys.stdin)['waypoints'][0]['id'])")

# –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ
curl http://localhost:8080/api/audio/$WAYPOINT_ID -o audio.mp3
```

---

## üéµ –ü–æ–ª–Ω—ã–π Workflow: –ü–æ–ª—É—á–µ–Ω–∏–µ –ê—É–¥–∏–æ –¥–ª—è –ú–∞—Ä—à—Ä—É—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—à–∞–≥–æ–≤—ã–π (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)

```bash
# –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å route_id
ROUTE_JSON=$(curl -s -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"],
    "max_waypoints": 3
  }')

ROUTE_ID=$(echo $ROUTE_JSON | python3 -c "import sys,json; print(json.load(sys.stdin)['route_id'])")
echo "‚úÖ –ú–∞—Ä—à—Ä—É—Ç —Å–æ–∑–¥–∞–Ω: $ROUTE_ID"

# –®–∞–≥ 2: –ü–æ–¥–æ–∂–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (1-2 –º–∏–Ω—É—Ç—ã –Ω–∞ —Ç–æ—á–∫—É)
echo "‚è≥ –ñ–¥–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—É–¥–∏–æ (60 —Å–µ–∫—É–Ω–¥)..."
sleep 60

# –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —Å waypoints
echo "üì• –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç–∞..."
ROUTE_DATA=$(curl -s http://localhost:8080/api/routes/$ROUTE_ID)

# –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞
echo "$ROUTE_DATA" | python3 -c "
import sys, json
data = json.load(sys.stdin)
for i, wp in enumerate(data['waypoints'], 1):
    status = '‚úÖ' if wp.get('content') else '‚è≥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è...'
    print(f'{i}. {wp[\"name\"]}: {status}')
"

# –®–∞–≥ 5: –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ –¥–ª—è –≤—Å–µ—Ö —Ç–æ—á–µ–∫
echo "üîä –°–∫–∞—á–∏–≤–∞–µ–º –∞—É–¥–∏–æ..."
echo "$ROUTE_DATA" | python3 << 'EOF'
import sys, json, subprocess

data = json.load(sys.stdin)
for i, wp in enumerate(data['waypoints'], 1):
    if wp.get('content'):
        waypoint_id = wp['id']
        filename = f"waypoint_{i}_{wp['name']}.mp3"
        print(f"–°–∫–∞—á–∏–≤–∞–Ω–∏–µ: {filename}")
        subprocess.run([
            'curl', '-s',
            f'http://localhost:8080/api/audio/{waypoint_id}',
            '-o', filename
        ])
        print(f"‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: {filename}")
    else:
        print(f"‚è≥ {wp['name']}: –∞—É–¥–∏–æ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤–æ")
EOF

echo "‚ú® –ì–æ—Ç–æ–≤–æ! –ê—É–¥–∏–æ—Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."
ls -lh waypoint_*.mp3
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (–∫–æ–ø–∏—Ä—É–π –∏ –∑–∞–ø—É—Å–∫–∞–π)

```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∞—É–¥–∏–æ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞ (–∏–∑–º–µ–Ω–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
START_LAT=55.7558
START_LON=37.6173
DURATION=60
EPOCHS='["soviet","medieval"]'
INTERESTS='["architecture","history"]'
MAX_POINTS=3

echo "üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞..."

# 1. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
ROUTE_JSON=$(curl -s -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d "{
    \"start_point\": {\"lat\": $START_LAT, \"lon\": $START_LON},
    \"duration_minutes\": $DURATION,
    \"epochs\": $EPOCHS,
    \"interests\": $INTERESTS,
    \"max_waypoints\": $MAX_POINTS
  }")

ROUTE_ID=$(echo $ROUTE_JSON | python3 -c "import sys,json; print(json.load(sys.stdin).get('route_id',''))")

if [ -z "$ROUTE_ID" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞"
    echo $ROUTE_JSON | python3 -m json.tool
    exit 1
fi

echo "‚úÖ –ú–∞—Ä—à—Ä—É—Ç —Å–æ–∑–¥–∞–Ω: $ROUTE_ID"
echo "üìç –¢–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞:"
echo $ROUTE_JSON | python3 -c "
import sys, json
data = json.load(sys.stdin)
for i, wp in enumerate(data['waypoints'], 1):
    print(f'  {i}. {wp[\"name\"]} ({wp[\"epoch\"]}, {wp[\"category\"]})')
"

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
WAIT_TIME=$((MAX_POINTS * 30))
echo ""
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—É–¥–∏–æ ($WAIT_TIME —Å–µ–∫—É–Ω–¥)..."
for i in $(seq $WAIT_TIME -1 1); do
    printf "\r   –û—Å—Ç–∞–ª–æ—Å—å: %3d —Å–µ–∫" $i
    sleep 1
done
echo ""

# 3. –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ
echo ""
echo "üîä –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤..."

ROUTE_DATA=$(curl -s http://localhost:8080/api/routes/$ROUTE_ID)

echo "$ROUTE_DATA" | python3 << 'EOF'
import sys, json, subprocess, os

data = json.load(sys.stdin)
downloaded = 0
pending = 0

for i, wp in enumerate(data['waypoints'], 1):
    if wp.get('content') and wp['content']:
        waypoint_id = wp['id']
        # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
        safe_name = "".join(c if c.isalnum() or c in (' ','-','_') else '_' for c in wp['name'])
        filename = f"audio_{i:02d}_{safe_name}.mp3"
        
        # –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
        result = subprocess.run([
            'curl', '-s', '-f',
            f'http://localhost:8080/api/audio/{waypoint_id}',
            '-o', filename
        ], capture_output=True)
        
        if result.returncode == 0 and os.path.getsize(filename) > 0:
            size = os.path.getsize(filename) / 1024  # KB
            duration = wp['content'].get('duration_seconds', 0)
            print(f"‚úÖ {i}. {wp['name']}")
            print(f"   –§–∞–π–ª: {filename} ({size:.1f} KB, {duration}s)")
            downloaded += 1
        else:
            print(f"‚ùå {i}. {wp['name']}: –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å")
            if os.path.exists(filename):
                os.remove(filename)
    else:
        print(f"‚è≥ {i}. {wp['name']}: –∞—É–¥–∏–æ –µ—â–µ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ")
        pending += 1

print(f"\n{'='*60}")
print(f"–°–∫–∞—á–∞–Ω–æ: {downloaded} —Ñ–∞–π–ª(–æ–≤)")
if pending > 0:
    print(f"–û–∂–∏–¥–∞—é—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: {pending}")
    print("–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã")
EOF

echo ""
echo "‚ú® –ì–æ—Ç–æ–≤–æ!"
echo ""
echo "üìÇ –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤:"
ls -lh audio_*.mp3 2>/dev/null || echo "   (—Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã)"
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞

```bash
# –ï—Å–ª–∏ –∞—É–¥–∏–æ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤–æ, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–∞–∫:

check_audio() {
    ROUTE_ID=$1
    echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ $ROUTE_ID..."
    
    curl -s http://localhost:8080/api/routes/$ROUTE_ID | python3 << 'EOF'
import sys, json

data = json.load(sys.stdin)
ready = 0
total = len(data['waypoints'])

print("\n–°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:\n")
for i, wp in enumerate(data['waypoints'], 1):
    has_content = wp.get('content') is not None
    status = "‚úÖ –≥–æ—Ç–æ–≤–æ" if has_content else "‚è≥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è"
    print(f"{i}. {wp['name']}: {status}")
    if has_content:
        ready += 1

print(f"\n–ì–æ—Ç–æ–≤–æ: {ready}/{total}")

if ready == total:
    print("\n‚úÖ –í—Å–µ –∞—É–¥–∏–æ –≥–æ—Ç–æ–≤—ã! –ú–æ–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å.")
    exit(0)
else:
    print(f"\n‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏... ({total-ready} –æ—Å—Ç–∞–ª–æ—Å—å)")
    exit(1)
EOF
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
# check_audio "YOUR_ROUTE_ID"
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–±—ã—Å—Ç—Ä–æ)

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç, –ø–æ–¥–æ–∂–¥–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –∞—É–¥–∏–æ
curl -s -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{"start_point":{"lat":55.7558,"lon":37.6173},"duration_minutes":60,"epochs":["soviet"],"interests":["architecture"],"max_waypoints":3}' | \
python3 -c "import sys,json,time,subprocess; \
data=json.load(sys.stdin); \
route_id=data['route_id']; \
print(f'Route: {route_id}'); \
time.sleep(90); \
import requests; \
route=requests.get(f'http://localhost:8080/api/routes/{route_id}').json(); \
[subprocess.run(['curl','-s',f'http://localhost:8080/api/audio/{wp[\"id\"]}','-o',f'audio_{i}.mp3']) for i,wp in enumerate(route['waypoints'],1) if wp.get('content')]; \
print('Done!')"
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ Endpoints

| –ú–µ—Ç–æ–¥ | URL | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|-------|-----|-----------|
| GET | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
| GET | `/api/pois` | –í—Å–µ –º–µ—Å—Ç–∞ |
| GET | `/api/pois?epoch=soviet` | –§–∏–ª—å—Ç—Ä –ø–æ —ç–ø–æ—Ö–µ |
| GET | `/api/pois/:id` | –û–¥–Ω–æ –º–µ—Å—Ç–æ |
| POST | `/api/routes/generate` | –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç |
| GET | `/api/routes/:id` | –î–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞ |
| GET | `/api/audio/:waypoint_id` | –°–∫–∞—á–∞—Ç—å MP3 |

---

## üéØ –§–∏–ª—å—Ç—Ä—ã –¥–ª—è POI

**–≠–ø–æ—Ö–∏:**
- `medieval` - –°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ (–¥–æ 1700)
- `imperial` - –ò–º–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∞—è –†–æ—Å—Å–∏—è (1700-1917)
- `soviet` - –°–°–°–† (1917-1991)
- `modern` - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (1991+)

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- `architecture` - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `history` - –ò—Å—Ç–æ—Ä–∏—è
- `art` - –ò—Å–∫—É—Å—Å—Ç–≤–æ
- `culture` - –ö—É–ª—å—Ç—É—Ä–∞
- `religion` - –†–µ–ª–∏–≥–∏—è

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –ó–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–≤–µ—Ç—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```bash
curl "http://localhost:8080/api/pois?epoch=soviet&category=architecture"
```

### –°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è
```bash
curl "http://localhost:8080/api/pois?epoch=medieval&category=history"
```

### –ú–∞—Ä—à—Ä—É—Ç –Ω–∞ 2 —á–∞—Å–∞
```bash
curl -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 120,
    "epochs": ["soviet", "medieval"],
    "interests": ["architecture", "history", "art"],
    "max_waypoints": 5
  }'
```

---

## üó∫Ô∏è –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –¢–æ—á–∫–∏

| –ú–µ—Å—Ç–æ | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã |
|-------|-----------|
| –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å | `{"lat": 55.7539, "lon": 37.6208}` |
| –í–î–ù–• | `{"lat": 55.8304, "lon": 37.6325}` |
| –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ | `{"lat": 55.7304, "lon": 37.6012}` |
| –ú–ì–£ | `{"lat": 55.7033, "lon": 37.5297}` |

---

## üêõ –ë—ã—Å—Ç—Ä—ã–µ –†–µ—à–µ–Ω–∏—è –ü—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
lsof -ti:8080 | xargs kill -9

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
PGPASSWORD=<password> psql -h 51.250.86.178 -U nike -d audioguid -c "SELECT 1;"
```

### "No POIs found"
```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å duration_minutes –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —ç–ø–æ—Ö–∏
"epochs": ["medieval", "imperial", "soviet", "modern"]
```

### –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
```bash
# –ù—É–∂–Ω—ã Yandex API –∫–ª—é—á–∏!
export YANDEX_API_KEY="your-key"
export YANDEX_FOLDER_ID="your-folder"
```

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ SQL –ó–∞–ø—Ä–æ—Å—ã

### –í—Å–µ –º–µ—Å—Ç–∞
```bash
PGPASSWORD=<password> psql -h 51.250.86.178 -U nike -d audioguid -c "SELECT name, epoch FROM pois;"
```

### –ü–æ–¥—Å—á–µ—Ç –ø–æ —ç–ø–æ—Ö–∞–º
```bash
PGPASSWORD=<password> psql -h 51.250.86.178 -U nike -d audioguid -c "
SELECT epoch, COUNT(*) FROM pois GROUP BY epoch;
"
```

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
```bash
PGPASSWORD=<password> psql -h 51.250.86.178 -U nike -d audioguid -c "
SELECT id, name, created_at FROM routes ORDER BY created_at DESC LIMIT 5;
"
```

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è

**–ú–∏–Ω–∏–º—É–º (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Yandex):**
```bash
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
```

**–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
```bash
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
export YANDEX_API_KEY="AQVN..."
export YANDEX_FOLDER_ID="b1g..."
export YANDEX_VOICE="alena"
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md`
- **–î–∏–∞–≥—Ä–∞–º–º—ã:** `–î–ò–ê–ì–†–ê–ú–ú–´.md`
- **Backend README:** `backend/README.md`

---

## üéì –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ö–æ–¥–∞ (–ö—Ä–∞—Ç–∫–æ)

```
backend/
‚îú‚îÄ‚îÄ cmd/server/main.go          # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.go           # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route_handler.go    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ poi_service.go      # –ü–æ–∏—Å–∫ –º–µ—Å—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gis_service.go      # 2GIS API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ content_service.go  # YandexGPT
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tts_service.go      # Yandex TTS
‚îÇ   ‚îú‚îÄ‚îÄ models/models.go        # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ database/postgres.go    # –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ config/config.yaml          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π –¢–µ—Å—Ç

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
cd backend && export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable" && go run cmd/server/main.go &

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã
sleep 2

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
curl http://localhost:8080/api/health

# 4. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
ROUTE=$(curl -s -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{"start_point":{"lat":55.7558,"lon":37.6173},"duration_minutes":90,"epochs":["soviet","medieval"],"interests":["architecture"]}')

# 5. –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
echo $ROUTE | python3 -m json.tool

# 6. –ò–∑–≤–ª–µ—á—å route_id
ROUTE_ID=$(echo $ROUTE | python3 -c "import sys,json; print(json.load(sys.stdin)['route_id'])")
echo "Route ID: $ROUTE_ID"
```

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∞—É–¥–∏–æ–≥–∏–¥ API! üéâ**
