# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Audio Guide API

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ Audio Guide!

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **[–®–ø–∞—Ä–≥–∞–ª–∫–∞](guides/–®–ü–ê–†–ì–ê–õ–ö–ê.md)** - –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∞—É–¥–∏–æ–≥–∏–¥–∞](guides/QUICK_START_AUDIO.md)** - –ù–∞—á–Ω–∏—Ç–µ –∑–∞ 3 –º–∏–Ω—É—Ç—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π API
- **[Swagger UI](http://localhost:8080/swagger/index.html)** - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

---

## üìñ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üì° API Documentation (`api/`)

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º:

- **[–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API –∞—É–¥–∏–æ–≥–∏–¥–∞](api/AUDIO_GUIDE_API.md)**
  - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
  - –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (JS, Python, Swift)

- **[–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API –∞—É–¥–∏–æ–≥–∏–¥–∞](api/SYNC_AUDIO_API.md)** ‚ö°
  - –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å ‚Üí –≥–æ—Ç–æ–≤—ã–π MP3
  - –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üìò Guides (`guides/`)

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞:

- **[–®–ø–∞—Ä–≥–∞–ª–∫–∞](guides/–®–ü–ê–†–ì–ê–õ–ö–ê.md)**
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞
  - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
  - Troubleshooting

- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∞—É–¥–∏–æ–≥–∏–¥–∞](guides/QUICK_START_AUDIO.md)**
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞
  - –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ

### üìö Reference (`reference/`)

–°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

- **[–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](reference/–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md)**
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
  - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
  - –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **[Changelog –∞—É–¥–∏–æ–≥–∏–¥–∞](reference/CHANGELOG_AUDIO_GUIDE.md)**
  - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
  - Roadmap

- **[–°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π](reference/SUMMARY.md)**
  - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **[–°–≤–æ–¥–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API](reference/SYNC_AUDIO_SUMMARY.md)**
  - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API

### üìä Diagrams (`diagrams/`)

–í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã:

- **[–î–∏–∞–≥—Ä–∞–º–º—ã](diagrams/–î–ò–ê–ì–†–ê–ú–ú–´.md)**
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
  - –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –ü–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
- [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±](api/AUDIO_GUIDE_API.md#—ç–Ω–¥–ø–æ–∏–Ω—Ç) - `POST /api/routes/generate`
- [–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±](api/SYNC_AUDIO_API.md#—ç–Ω–¥–ø–æ–∏–Ω—Ç) - `POST /api/routes/generate-audio` ‚ö°

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ
- [–ê—É–¥–∏–æ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏](api/AUDIO_GUIDE_API.md#–ø–æ–ª—É—á–∏—Ç—å-–∞—É–¥–∏–æ-–¥–ª—è-–æ–¥–Ω–æ–π-—Ç–æ—á–∫–∏) - `GET /api/audio/:waypoint_id`
- [–ê—É–¥–∏–æ –≤—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞](api/AUDIO_GUIDE_API.md#–ø–æ–ª—É—á–∏—Ç—å-–ø–æ–ª–Ω—ã–π-–∞—É–¥–∏–æ–≥–∏–¥-–º–∞—Ä—à—Ä—É—Ç–∞) - `GET /api/routes/:route_id/audio`

#### –†–∞–±–æ—Ç–∞ —Å POI
- [–°–ø–∏—Å–æ–∫ –º–µ—Å—Ç](api/AUDIO_GUIDE_API.md) - `GET /api/pois`
- [–î–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞](api/AUDIO_GUIDE_API.md) - `GET /api/pois/:poi_id`

### –ü–æ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏

#### –Ø —Ö–æ—á—É –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
‚Üí [–®–ø–∞—Ä–≥–∞–ª–∫–∞](guides/–®–ü–ê–†–ì–ê–õ–ö–ê.md)  
‚Üí [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](guides/QUICK_START_AUDIO.md)

#### –Ø —Ö–æ—á—É –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å API
‚Üí [Swagger UI](http://localhost:8080/swagger/index.html)  
‚Üí [–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API](api/SYNC_AUDIO_API.md)  
‚Üí [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API](api/AUDIO_GUIDE_API.md)

#### –Ø —Ö–æ—á—É –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
‚Üí [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](reference/–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md)  
‚Üí [–î–∏–∞–≥—Ä–∞–º–º—ã](diagrams/–î–ò–ê–ì–†–ê–ú–ú–´.md)

#### –Ø —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π
‚Üí [Troubleshooting –≤ –®–ø–∞—Ä–≥–∞–ª–∫–µ](guides/–®–ü–ê–†–ì–ê–õ–ö–ê.md#troubleshooting)  
‚Üí [Troubleshooting –≤ API docs](api/AUDIO_GUIDE_API.md#troubleshooting)

---

## üîß Swagger / OpenAPI

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080/swagger/index.html
```

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Swagger UI

- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

- **JSON:** `http://localhost:8080/swagger/doc.json`
- **YAML:** –°–º. `backend/docs/swagger.yaml`

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ API –º–µ—Ç–æ–¥–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π | –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π |
|----------------|-------------|------------|
| **–≠–Ω–¥–ø–æ–∏–Ω—Ç** | `/routes/generate` | `/routes/generate-audio` |
| **–ó–∞–ø—Ä–æ—Å–æ–≤** | 2-3 | 1 |
| **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | 2-5 –º–∏–Ω—É—Ç |
| **–†–µ–∑—É–ª—å—Ç–∞—Ç** | route_id | MP3 —Ñ–∞–π–ª |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –ü—Ä–æ—Å—Ç–∞—è |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –°–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ | –ü—Ä–æ—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ |

---

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

```bash
curl -X POST http://localhost:8080/api/routes/generate-audio \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"],
    "max_waypoints": 3
  }' \
  -o my_guide.mp3
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
ROUTE_ID=$(curl -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{"start_point": {"lat": 55.7558, "lon": 37.6173}, "duration_minutes": 60}' \
  | jq -r '.route_id')

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 2-3 –º–∏–Ω—É—Ç—ã
sleep 180

# 3. –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ
curl http://localhost:8080/api/routes/$ROUTE_ID/audio -o guide.mp3
```

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

- `./generate_audio_route.sh` - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ–≥–∏–¥–∞
- `./test_route.sh` - –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API
- `./test_audio_guide.sh <route_id>` - –¢–µ—Å—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∞—É–¥–∏–æ

### Backend —Å–∫—Ä–∏–ø—Ç—ã

–í –ø–∞–ø–∫–µ `backend/`:

- `./run.sh` - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
- `go run cmd/server/main.go` - –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend:** Go 1.21+, Gin Framework
- **Database:** PostgreSQL 16 + PostGIS
- **API Documentation:** Swagger/OpenAPI 3.0
- **External APIs:** 2GIS, YandexGPT, Yandex TTS

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- [2GIS API Docs](https://docs.2gis.com/)
- [YandexGPT Docs](https://cloud.yandex.ru/docs/yandexgpt/)
- [Yandex SpeechKit Docs](https://cloud.yandex.ru/docs/speechkit/)

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- [Backend README](../backend/README.md)
- [–û—Å–Ω–æ–≤–Ω–æ–π README](../README.md)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [–®–ø–∞—Ä–≥–∞–ª–∫—É](guides/–®–ü–ê–†–ì–ê–õ–ö–ê.md)
2. –ò–∑—É—á–∏—Ç–µ [Swagger UI](http://localhost:8080/swagger/index.html)
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [Troubleshooting](api/AUDIO_GUIDE_API.md#troubleshooting)

---

## üéâ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
cd backend && go run cmd/server/main.go

# –û—Ç–∫—Ä—ã—Ç—å Swagger UI (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)
open http://localhost:8080/swagger/index.html

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥
./generate_audio_route.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ API
curl http://localhost:8080/api/health
```

---

<div align="center">
  <b>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ 2GIS</b>
  <br>
  <sub>–£–º–Ω—ã–µ –∞—É–¥–∏–æ–º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –ø—Ä–æ–≥—É–ª–æ–∫</sub>
</div>
