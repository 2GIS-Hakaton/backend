# ‚ö° –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ–≥–∏–¥–∞ - –°–≤–æ–¥–∫–∞

## ‚ú® –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–ù–æ–≤–∞—è —Ä—É—á–∫–∞ –¥–ª—è **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π** –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—É–¥–∏–æ–≥–∏–¥–∞ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞, –ø–æ–ª—É—á–∞–µ—Ç–µ –≥–æ—Ç–æ–≤—ã–π MP3 —Ñ–∞–π–ª –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º!

---

## üéØ –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

```
POST /api/routes/generate-audio
```

**–í—Ö–æ–¥:** JSON —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞  
**–í—ã—Ö–æ–¥:** MP3 —Ñ–∞–π–ª —Å –∞—É–¥–∏–æ–≥–∏–¥–æ–º

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±

```bash
./generate_audio_route.sh
```

### –° –ø–æ–º–æ—â—å—é curl

```bash
curl -X POST http://localhost:8080/api/routes/generate-audio \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"],
    "max_waypoints": 3
  }' \
  -o my_guide.mp3

afplay my_guide.mp3
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API | –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API |
|----------------|-----------------|----------------|
| **–ó–∞–ø—Ä–æ—Å–æ–≤** | 2-3 | 1 |
| **–û–∂–∏–¥–∞–Ω–∏–µ** | –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ |
| **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ (route_id) | 2-5 –º–∏–Ω—É—Ç (MP3) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –ü—Ä–æ—Å—Ç–∞—è |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –°–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ | –ü—Ä–æ—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ |

---

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **`generate_audio_route.sh`** - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **`SYNC_AUDIO_API.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
3. **`SYNC_AUDIO_SUMMARY.md`** - –≠—Ç–∞ —Å–≤–æ–¥–∫–∞

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`backend/internal/api/route_handler.go`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `GenerateRouteWithAudio()`
2. **`backend/internal/api/routes.go`** - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —Ä–æ—É—Ç `/routes/generate-audio`
3. **`README.md`** - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ API –∏ –ø—Ä–∏–º–µ—Ä—ã

---

## ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **1 —Ç–æ—á–∫–∞:** ~30-60 —Å–µ–∫—É–Ω–¥
- **3 —Ç–æ—á–∫–∏:** ~2-3 –º–∏–Ω—É—Ç—ã
- **5 —Ç–æ—á–µ–∫:** ~3-5 –º–∏–Ω—É—Ç

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å** –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–π MP3** –Ω–∞ –≤—ã—Ö–æ–¥–µ
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ —Ä—É—á–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üéì –ü—Ä–∏–º–µ—Ä workflow

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
cd backend
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
export YANDEX_API_KEY="your-key"
export YANDEX_FOLDER_ID="your-folder"
go run cmd/server/main.go

# 2. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥
./generate_audio_route.sh

# 3. –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª route_audio_*.mp3 —Å–æ–∑–¥–∞–Ω
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [SYNC_AUDIO_API.md](SYNC_AUDIO_API.md)
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API:** [AUDIO_GUIDE_API.md](AUDIO_GUIDE_API.md)
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** [QUICK_START_AUDIO.md](QUICK_START_AUDIO.md)
- **–û—Å–Ω–æ–≤–Ω–æ–π README:** [README.md](README.md)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∞—É–¥–∏–æ–≥–∏–¥ **–æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º**:

```bash
curl -X POST http://localhost:8080/api/routes/generate-audio \
  -d '{"start_point": {"lat": 55.7558, "lon": 37.6173}, "duration_minutes": 60, "epochs": ["soviet"], "interests": ["architecture"]}' \
  -o guide.mp3
```

**–ü—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ!** üöÄ
