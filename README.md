# üéß –£–º–Ω—ã–π –ê—É–¥–∏–æ–≥–∏–¥ - Audio Guide API

> –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ–º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 2GIS API, YandexGPT –∏ Yandex TTS

[![Go](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://go.dev/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791?style=flat&logo=postgresql)](https://www.postgresql.org/)
[![2GIS](https://img.shields.io/badge/2GIS-API-00C853?style=flat)](https://docs.2gis.com/)
[![Yandex](https://img.shields.io/badge/Yandex-Cloud-FF0000?style=flat)](https://cloud.yandex.ru/)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### –ó–∞ 3 –º–∏–Ω—É—Ç—ã

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
export YANDEX_API_KEY="your-key"
export YANDEX_FOLDER_ID="your-folder"

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
cd backend
go run cmd/server/main.go

# 3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
curl -X POST http://localhost:8080/api/routes/generate-audio \
  -d '{"start_point": {"lat": 55.7558, "lon": 37.6173}, "duration_minutes": 90, "max_waypoints": 3}' \
  -H "Content-Type: application/json" \
  -o route_guide.mp3

# 4. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
afplay route_guide.mp3
```

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [GETTING_STARTED.md](GETTING_STARTED.md)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üéØ –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å
- **[GETTING_STARTED.md](GETTING_STARTED.md)** - üöÄ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É
- **[CUSTOM_POIS_GUIDE.md](CUSTOM_POIS_GUIDE.md)** - üìç –°–≤–æ–∏ –º–µ—Å—Ç–∞ –¥–ª—è –∞—É–¥–∏–æ–≥–∏–¥–∞ ‚≠ê –ù–û–í–û–ï
- **[FINAL_SETUP.md](FINAL_SETUP.md)** - ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **[Swagger UI](http://localhost:8080/swagger/index.html)** - üîß –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìñ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[docs/README.md](docs/README.md)** - –¶–µ–Ω—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **[docs/api/](docs/api/)** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)
- **[docs/guides/](docs/guides/)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ —à–ø–∞—Ä–≥–∞–ª–∫–∏
- **[docs/reference/](docs/reference/)** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[docs/diagrams/](docs/diagrams/)** - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã

---

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- **üó∫Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤** - 3 —Å–ø–æ—Å–æ–±–∞: –∞–≤—Ç–æ–ø–æ–∏—Å–∫, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Å—Ç–∞, —Å–≤–æ–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- **üìç –°–≤–æ–∏ –º–µ—Å—Ç–∞** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∞—É–¥–∏–æ–≥–∏–¥—ã –ø–æ —Å–≤–æ–∏–º –ª—é–±–∏–º—ã–º –º–µ—Å—Ç–∞–º ‚≠ê –ù–û–í–û–ï
- **üîç –£–º–Ω—ã–π –ø–æ–∏—Å–∫** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —ç–ø–æ—Ö–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **üìä PostgreSQL** - –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **üåê REST API** - –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **üìñ Swagger UI** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### ‚ö° –° Yandex API –∫–ª—é—á–∞–º–∏

- **‚úçÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞** - —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å–∫–∞–∑—ã —á–µ—Ä–µ–∑ YandexGPT
- **üîä –°–∏–Ω—Ç–µ–∑ –∞—É–¥–∏–æ** - –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ Yandex TTS
- **üîé –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç—ã —á–µ—Ä–µ–∑ Yandex Search

---

## üì° API Endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ |
| `GET` | `/api/pois` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Å—Ç –∏–Ω—Ç–µ—Ä–µ—Å–∞ |
| `GET` | `/api/pois?epoch=soviet` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —ç–ø–æ—Ö–µ |
| `GET` | `/api/pois/:id` | –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |
| `POST` | `/api/routes/generate` | –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ) |
| `POST` | `/api/routes/generate-audio` | **‚ö° –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏—Ç—å MP3** |
| `GET` | `/api/routes/:id` | –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º |
| `GET` | `/api/routes/:id/audio` | –ü–æ–ª–Ω—ã–π –∞—É–¥–∏–æ–≥–∏–¥ –º–∞—Ä—à—Ä—É—Ç–∞ (MP3) |
| `GET` | `/api/audio/:waypoint_id` | –ê—É–¥–∏–æ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏ (MP3) |

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç "–°–æ–≤–µ—Ç—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"

```bash
curl -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"],
    "max_waypoints": 3
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "route_id": "ea7a7092-8fa1-44c2-a656-55f38d4822e3",
  "name": "–°–æ–≤–µ—Ç—Å–∫–∞—è –ú–æ—Å–∫–≤–∞: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
  "estimated_duration": 60,
  "waypoints": [
    {
      "id": "waypoint-1",
      "name": "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
      "coordinates": {"lat": 55.7539, "lon": 37.6208},
      "epoch": "medieval",
      "order": 1
    },
    {
      "id": "waypoint-2",
      "name": "–ö—Ä–µ–º–ª—å",
      "coordinates": {"lat": 55.752, "lon": 37.6175},
      "epoch": "medieval",
      "order": 2
    }
  ]
}
```

### –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

```bash
curl http://localhost:8080/api/routes/ea7a7092-8fa1-44c2-a656-55f38d4822e3
```

### –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥ —Å—Ä–∞–∑—É (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ) ‚ö°

```bash
# –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å - —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç–µ MP3!
curl -X POST http://localhost:8080/api/routes/generate-audio \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 60,
    "epochs": ["soviet"],
    "interests": ["architecture"],
    "max_waypoints": 3
  }' \
  -o my_audio_guide.mp3

# –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
afplay my_audio_guide.mp3  # macOS
```

### –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

```bash
# –°–∫–∞—á–∞—Ç—å –≤–µ—Å—å –∞—É–¥–∏–æ–≥–∏–¥ –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º
curl http://localhost:8080/api/routes/ea7a7092-8fa1-44c2-a656-55f38d4822e3/audio -o route_guide.mp3

# –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
afplay route_guide.mp3  # macOS
```

### –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏

```bash
curl http://localhost:8080/api/audio/waypoint-1 -o audio.mp3
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Client    ‚îÇ HTTP Requests
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   GIN Web Server (:8080)        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   Route Handler          ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ               ‚îÇ
    ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇServices ‚îÇ   ‚îÇ  Database   ‚îÇ
‚îÇ         ‚îÇ   ‚îÇ             ‚îÇ
‚îÇPOI      ‚îÇ   ‚îÇ PostgreSQL  ‚îÇ
‚îÇGIS      ‚îÇ   ‚îÇ             ‚îÇ
‚îÇContent  ‚îÇ   ‚îÇ - pois      ‚îÇ
‚îÇTTS      ‚îÇ   ‚îÇ - routes    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ - waypoints ‚îÇ
     ‚îÇ        ‚îÇ - contents  ‚îÇ
     ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ External APIs  ‚îÇ
‚îÇ - 2GIS         ‚îÇ
‚îÇ - YandexGPT    ‚îÇ
‚îÇ - Yandex TTS   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ–¥—Ä–æ–±–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã:** –°–º. [–î–ò–ê–ì–†–ê–ú–ú–´.md](–î–ò–ê–ì–†–ê–ú–ú–´.md)

---

## üìä –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

- **`pois`** - –ú–µ—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞ (12 –∑–∞–ø–∏—Å–µ–π)
- **`routes`** - –°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- **`waypoints`** - –¢–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **`contents`** - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Ç–µ–∫—Å—Ç + –∞—É–¥–∏–æ)

### –°–≤—è–∑–∏

```
pois (1) ‚îÄ‚îÄ< waypoints (N)
routes (1) ‚îÄ‚îÄ< waypoints (N)
waypoints (1) ‚îÄ‚îÄ< contents (1)
```

**–°—Ö–µ–º–∞ –ë–î:** –°–º. [–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----------|----------|
| **Backend** | Go 1.21+ | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ |
| **Web Framework** | Gin | HTTP —Ä–æ—É—Ç–µ—Ä |
| **ORM** | GORM | PostgreSQL ORM |
| **Database** | PostgreSQL 16 | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| **Maps & Routing** | 2GIS API | –ö–∞—Ä—Ç—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã |
| **Text Generation** | YandexGPT | AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ |
| **Audio** | Yandex TTS | Text-to-Speech |
| **Search** | Yandex Search | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
2gis_hackaton/
‚îú‚îÄ‚îÄ backend/                    # üéØ Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ main.go        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # HTTP handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database/          # –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.yaml        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ audio/                 # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ MP3
‚îÇ   ‚îî‚îÄ‚îÄ go.mod                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ scripts/                   # üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ create_tables.sql      # SQL —Å—Ö–µ–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ import_sample_pois.py  # –ò–º–ø–æ—Ä—Ç POI
‚îÇ
‚îú‚îÄ‚îÄ –ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md     # üìñ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ –î–ò–ê–ì–†–ê–ú–ú–´.md               # üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ –®–ü–ê–†–ì–ê–õ–ö–ê.md               # ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞
‚îî‚îÄ‚îÄ README.md                  # üìÑ –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üéì –ö–∞–∫ –≠—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å

```json
POST /api/routes/generate
{
  "start_point": {"lat": 55.7558, "lon": 37.6173},
  "duration_minutes": 60,
  "epochs": ["soviet"],
  "interests": ["architecture"]
}
```

### 2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç POI

- –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞: `duration √ó 83 –º/–º–∏–Ω`
- –ò—â–µ—Ç –º–µ—Å—Ç–∞ –≤ –ë–î –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º (epoch, category)
- –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (—Ñ–æ—Ä–º—É–ª–∞ Haversine)
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏

### 3. –°–æ–∑–¥–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç

- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç –≤ –ë–î
- –°–æ–∑–¥–∞–µ—Ç waypoints –¥–ª—è –∫–∞–∂–¥–æ–≥–æ POI
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç route_id –∫–ª–∏–µ–Ω—Ç—É

### 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ waypoint:
1. **YandexGPT** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç (2-3 –º–∏–Ω—É—Ç—ã —á—Ç–µ–Ω–∏—è)
2. **Yandex TTS** —Å–æ–∑–¥–∞–µ—Ç –∞—É–¥–∏–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç MP3 –≤ `./audio/`
4. –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `contents`

### 5. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```json
GET /api/routes/{route_id}
{
  "waypoints": [{
    "name": "–í–î–ù–•",
    "content": {
      "text": "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –∑–Ω–∞–º–µ–Ω–∏—Ç–∞—è –í–î–ù–•...",
      "audio_url": "/api/audio/waypoint-id",
      "duration_seconds": 180
    }
  }]
}
```

**–ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫:** –°–º. [–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md - –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö](–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md#-–ø–æ–ª–Ω—ã–π-–ø–æ—Ç–æ–∫-–¥–∞–Ω–Ω—ã—Ö)

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–±–µ–∑ Yandex)

```bash
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"
```

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ POI
- ‚úÖ API endpoints

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –∞—É–¥–∏–æ

### –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å Yandex)

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
export DATABASE_URL="postgresql://nike:<password>@51.250.86.178:<port>/audioguid?sslmode=disable"

# Yandex Cloud
export YANDEX_API_KEY="AQVN..."
export YANDEX_FOLDER_ID="b1g..."
export YANDEX_VOICE="alena"
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Yandex –∫–ª—é—á–∏:**
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: https://console.cloud.yandex.ru/
2. –°–æ–∑–¥–∞—Ç—å Service Account
3. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª–∏: `ai.languageModels.user`, `ai.speechkit-tts.user`
4. –°–æ–∑–¥–∞—Ç—å API Key
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Folder ID

---

## üìç –î–æ—Å—Ç—É–ø–Ω—ã–µ POI (12)

| –ù–∞–∑–≤–∞–Ω–∏–µ | –≠–ø–æ—Ö–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã |
|----------|-------|-----------|-----------|
| –í–î–ù–• | soviet | architecture | 55.8304, 37.6325 |
| –ü–∞–≤–∏–ª—å–æ–Ω –ö–æ—Å–º–æ—Å | soviet | history | 55.8283, 37.6308 |
| –§–æ–Ω—Ç–∞–Ω –î—Ä—É–∂–±–∞ –Ω–∞—Ä–æ–¥–æ–≤ | soviet | art | 55.8277, 37.6319 |
| –†–∞–±–æ—á–∏–π –∏ –∫–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞ | soviet | art | 55.8311, 37.6278 |
| –ú–ì–£ | soviet | architecture | 55.7033, 37.5297 |
| –û—Å—Ç–∞–Ω–∫–∏–Ω—Å–∫–∞—è –±–∞—à–Ω—è | soviet | architecture | 55.8194, 37.6119 |
| –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ | soviet | culture | 55.7304, 37.6012 |
| –ì–æ—Å—Ç–∏–Ω–∏—Ü–∞ –£–∫—Ä–∞–∏–Ω–∞ | soviet | architecture | 55.7526, 37.5676 |
| –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è –≥–∞–ª–µ—Ä–µ—è | imperial | art | 55.7415, 37.6206 |
| –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å | medieval | history | 55.7539, 37.6208 |
| –•—Ä–∞–º –í–∞—Å–∏–ª–∏—è –ë–ª–∞–∂–µ–Ω–Ω–æ–≥–æ | medieval | religion | 55.7525, 37.6231 |
| –ö—Ä–µ–º–ª—å | medieval | history | 55.7520, 37.6175 |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å ‚Üí MP3)
./generate_audio_route.sh

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –º–∞—Ä—à—Ä—É—Ç–∞ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
./test_route.sh

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∞—É–¥–∏–æ–≥–∏–¥–∞
./test_audio_guide.sh <route_id>
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# 1. Health check
curl http://localhost:8080/api/health

# 2. –°–ø–∏—Å–æ–∫ POI
curl http://localhost:8080/api/pois | python3 -m json.tool

# 3. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
curl -X POST http://localhost:8080/api/routes/generate \
  -H "Content-Type: application/json" \
  -d '{
    "start_point": {"lat": 55.7558, "lon": 37.6173},
    "duration_minutes": 90,
    "epochs": ["soviet", "medieval"],
    "interests": ["architecture", "history"]
  }' | python3 -m json.tool
```

---

## üêõ Troubleshooting

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
lsof -ti:8080 | xargs kill -9

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
PGPASSWORD=<password> psql -h 51.250.86.178 -p <port> -U nike -d audioguid -c "SELECT 1;"
```

### "No POIs found"

```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å duration_minutes –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
{
  "duration_minutes": 120,
  "epochs": ["soviet", "medieval", "imperial"],
  "interests": ["architecture", "history", "art"]
}
```

### –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ Yandex API –∫–ª—é—á–µ–π
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–ë–æ–ª—å—à–µ —Ä–µ—à–µ–Ω–∏–π:** –°–º. [–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md - Troubleshooting](–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md#-troubleshooting)

---

## üìà Roadmap

- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ POI (100+)
- [ ] –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¶–û–î–î
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- [ ] –£—á–µ—Ç –ø–æ–≥–æ–¥—ã –∏ –¥–æ—Ä–æ–∂–Ω—ã—Ö —Ä–∞–±–æ—Ç
- [ ] WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS/Android)
- [ ] –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- [ ] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏

---

## üë• –ö–æ–º–∞–Ω–¥–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ 2GIS

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ –°—Å—ã–ª–∫–∏

- [2GIS API Docs](https://docs.2gis.com/)
- [YandexGPT Docs](https://cloud.yandex.ru/docs/yandexgpt/)
- [Yandex SpeechKit Docs](https://cloud.yandex.ru/docs/speechkit/)
- [Go Documentation](https://go.dev/doc/)
- [Gin Framework](https://gin-gonic.com/)
- [GORM](https://gorm.io/)

---

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [–ü–û–õ–ù–£–Æ_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ.md](–ü–û–õ–ù–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [–®–ü–ê–†–ì–ê–õ–ö–£.md](–®–ü–ê–†–ì–ê–õ–ö–ê.md)
3. –ò–∑—É—á–∏—Ç–µ [–î–ò–ê–ì–†–ê–ú–ú–´.md](–î–ò–ê–ì–†–ê–ú–ú–´.md)

---

<div align="center">
  <b>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ 2GIS</b>
  <br>
  <sub>–£–º–Ω—ã–µ –∞—É–¥–∏–æ–º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –ø—Ä–æ–≥—É–ª–æ–∫</sub>
</div>
